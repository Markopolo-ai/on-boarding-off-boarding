{"version":3,"sources":["../../src/css.ts"],"names":["expandResponsive","styles","theme","__breakpoints","isResponsive","toArrayValue","medias","media","computedStyles","key","value","Array","isArray","queries","slice","length","index","getCss","options","configs","pseudos","css","stylesOrFn","nested","_styles","k","valueOrFn","config","property","rawValue","transform","processResult","staticStyles","cssFn","pseudoSelectors","systemPropConfigs"],"mappings":"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","sourcesContent":["import { Dict, isObject, mergeWith as merge, runIfFn } from \"@chakra-ui/utils\"\nimport * as CSS from \"csstype\"\nimport { Config, PropConfig } from \"./prop-config\"\nimport { pseudoSelectors } from \"./pseudos\"\nimport { systemProps as systemPropConfigs } from \"./system\"\nimport { CssTheme, StyleObjectOrFn } from \"./types\"\n\nexport const expandResponsive = (styles: Dict) => (theme: Dict) => {\n  if (!theme.__breakpoints) return styles\n  const { isResponsive, toArrayValue, media: medias } = theme.__breakpoints\n\n  const computedStyles: Dict = {}\n\n  for (const key in styles) {\n    let value = runIfFn(styles[key], theme)\n\n    if (value == null) continue\n\n    value = isObject(value) && isResponsive(value) ? toArrayValue(value) : value\n\n    if (!Array.isArray(value)) {\n      computedStyles[key] = value\n      continue\n    }\n\n    const queries = value.slice(0, medias.length).length\n\n    for (let index = 0; index < queries; index += 1) {\n      const media = medias?.[index]\n\n      if (!media) {\n        computedStyles[key] = value[index]\n        continue\n      }\n\n      computedStyles[media] = computedStyles[media] || {}\n\n      if (value[index] == null) {\n        continue\n      }\n\n      computedStyles[media][key] = value[index]\n    }\n  }\n\n  return computedStyles\n}\n\ninterface Options {\n  theme: CssTheme\n  configs?: Config\n  pseudos?: Record<string, CSS.Pseudos | (string & {})>\n}\n\nexport function getCss(options: Options) {\n  const { configs = {}, pseudos = {}, theme } = options\n\n  const css = (stylesOrFn: Dict, nested = false) => {\n    const _styles = runIfFn(stylesOrFn, theme)\n    const styles = expandResponsive(_styles)(theme)\n\n    let computedStyles: Dict = {}\n\n    for (const k in styles) {\n      const valueOrFn = styles[k]\n      const value = runIfFn(valueOrFn, theme)\n      const key = k in pseudos ? pseudos[k] : k\n\n      let config = configs[key]\n\n      if (config === true) {\n        config = { property: key } as PropConfig\n      }\n\n      if (isObject(value)) {\n        computedStyles[key] = css(value, true)\n        continue\n      }\n\n      let rawValue = config?.transform?.(value, theme) ?? value\n      rawValue = config?.processResult ? css(rawValue, true) : rawValue\n\n      if (config?.property) {\n        config.property = runIfFn(config.property, theme)\n      }\n\n      if (!nested && config?.static) {\n        const staticStyles = runIfFn(config.static, theme)\n        computedStyles = merge({}, computedStyles, staticStyles)\n      }\n\n      if (config?.property && Array.isArray(config?.property)) {\n        for (const property of config.property) {\n          computedStyles[property] = rawValue\n        }\n        continue\n      }\n\n      if (config?.property) {\n        if (config.property === \"&\" && isObject(rawValue)) {\n          computedStyles = merge({}, computedStyles, rawValue)\n        } else {\n          computedStyles[config.property as string] = rawValue\n        }\n        continue\n      }\n\n      if (isObject(rawValue)) {\n        computedStyles = merge({}, computedStyles, rawValue)\n        continue\n      }\n\n      computedStyles[key] = rawValue\n    }\n\n    return computedStyles\n  }\n\n  return css\n}\n\nexport const css = (styles: StyleObjectOrFn) => (theme: any) => {\n  const cssFn = getCss({\n    theme,\n    pseudos: pseudoSelectors,\n    configs: systemPropConfigs,\n  })\n  return cssFn(styles)\n}\n"],"file":"css.js"}